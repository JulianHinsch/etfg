<div class="table-container mat-elevation-z4">
    <!-- Header -->
    <div class="header">
    <h6>Views By Date</h6>
    </div>
    <!-- Loading Shade -->
    <div class="loading-shade" *ngIf="isLoadingResults"></div>
    <mat-table #table [dataSource]="dataSource" matSort matSortActive="date" matSortDisableClear matSortDirection="desc">
        <!-- Date Column -->
        <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Date/Time </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.date}} </mat-cell>
        </ng-container>
        <!-- Firm Column -->
        <ng-container matColumnDef="firm">
            <mat-header-cell *matHeaderCellDef> Firm </mat-header-cell>
            <mat-cell *matCellDef="let row"><a href='/firms/{{row.firmId}}'>{{ row.firm }}</a></mat-cell>
        </ng-container>
        <!-- Location Column -->
        <ng-container matColumnDef="location">
            <mat-header-cell *matHeaderCellDef> Location </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <span *ngIf="row.address">{{row.address}}</span><br>
                <span *ngIf="row.city">{{row.city}},</span><br>
                <span *ngIf="row.state">{{row.state}}</span>
                <span *ngIf="row.zip">{{row.zip}}</span><br>
                <span *ngIf="row.country">{{row.country}}<br></span>
            </mat-cell>
        </ng-container>
        <!-- Type Column -->
        <ng-container matColumnDef="type">
            <mat-header-cell *matHeaderCellDef> Action Type </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.type}} </mat-cell>
        </ng-container> -->
        <!-- Portfolio Column -->
        <ng-container matColumnDef="portfolio">
            <mat-header-cell *matHeaderCellDef class="portfolio-width"> Portfolio </mat-header-cell>
            <mat-cell *matCellDef="let row" class="portfolio-width">
            <span *ngFor="let item of row.portfolio">
                <a href='/products/{{item.ticker}}'>{{ item.ticker }}</a>: {{ item.percentage }}<br>
            </span>
            </mat-cell>
        </ng-container>
        <!-- Row Headers -->
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
    <!-- Paginator -->
    <mat-paginator [length]="resultsLength" [pageSize]="20"></mat-paginator>
</div>
    
  
    